({480:function(){var e=this&&this.__awaiter||function(e,o,i,t){return new(i||(i=Promise))((function(n,l){function c(e){try{a(t.next(e))}catch(e){l(e)}}function s(e){try{a(t.throw(e))}catch(e){l(e)}}function a(e){var o;e.done?n(e.value):(o=e.value,o instanceof i?o:new i((function(e){e(o)}))).then(c,s)}a((t=t.apply(e,o||[])).next())}))};figma.showUI(__html__,{themeColors:!0,height:400}),figma.ui.onmessage=o=>e(this,void 0,void 0,(function*(){if("cancel"===o.type)figma.closePlugin();else if("load"===o.type){const e=yield figma.clientStorage.getAsync("google-sheet-sync:url"),o=yield figma.clientStorage.getAsync("google-sheet-sync:collection"),i=yield figma.clientStorage.getAsync("google-sheet-sync:columns");void 0!==e&&void 0!==o&&void 0!==i&&figma.ui.postMessage({type:"update",url:e,collection:o,columns:i})}else if("sync"===o.type)try{const i=yield function(o){return e(this,void 0,void 0,(function*(){const e=yield fetch(o+"&majorDimension=COLUMNS");return(yield e.json()).values}))}(o.url);let t=figma.variables.getLocalVariableCollections().find((e=>e.name===o.collection));void 0!==t&&t.remove(),t=function(e,o){const i=figma.variables.createVariableCollection(e);return o.forEach((e=>{i.addMode(e.trim())})),i.removeMode(i.modes[0].modeId),i}(o.collection,o.columns),i[0].forEach(((e,n)=>{const l=[];o.columns.forEach(((e,o)=>{l.push(i[o+1][n])})),function(e,o,i,t){const n=figma.variables.createVariable(i,e.id,"STRING");t.forEach(((o,i)=>{n.setValueForMode(e.modes[i].modeId,o)}))}(t,0,e.split(".").join("_"),l)})),yield figma.clientStorage.setAsync("google-sheet-sync:url",o.url),yield figma.clientStorage.setAsync("google-sheet-sync:collection",o.collection),yield figma.clientStorage.setAsync("google-sheet-sync:columns",o.columns),figma.closePlugin()}catch(e){alert("The Google Sheet URL is invalid.")}finally{figma.ui.postMessage({type:"done"})}}))}})[480]();